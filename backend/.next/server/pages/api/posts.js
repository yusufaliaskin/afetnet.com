"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/posts";
exports.ids = ["pages/api/posts"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

module.exports = import("uuid");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cposts%5Cindex.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cposts%5Cindex.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_posts_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\posts\\index.js */ \"(api)/./pages/api/posts/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_posts_index_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_posts_index_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_posts_index_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_posts_index_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/posts\",\n        pathname: \"/api/posts\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_posts_index_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnBvc3RzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNwb3N0cyU1Q2luZGV4LmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzBEO0FBQzFEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxzREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsc0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZldGxpbmstYmFja2VuZC8/MWMyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHBvc3RzXFxcXGluZGV4LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcG9zdHNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wb3N0c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cposts%5Cindex.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/middleware/auth.js":
/*!********************************!*\
  !*** ./lib/middleware/auth.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticateToken: () => (/* binding */ authenticateToken),\n/* harmony export */   corsMiddleware: () => (/* binding */ corsMiddleware),\n/* harmony export */   errorHandler: () => (/* binding */ errorHandler),\n/* harmony export */   optionalAuth: () => (/* binding */ optionalAuth),\n/* harmony export */   rateLimit: () => (/* binding */ rateLimit),\n/* harmony export */   requestLogger: () => (/* binding */ requestLogger),\n/* harmony export */   requireAdmin: () => (/* binding */ requireAdmin),\n/* harmony export */   validateInput: () => (/* binding */ validateInput)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../supabase.js */ \"(api)/./lib/supabase.js\");\n\n\n/**\n * JWT token doğrulama middleware'i\n * @param {Object} req - Request object\n * @param {Object} res - Response object\n * @param {Function} next - Next middleware function\n */ const authenticateToken = async (req, res, next)=>{\n    try {\n        const authHeader = req.headers[\"authorization\"];\n        const token = authHeader && authHeader.split(\" \")[1]; // Bearer TOKEN\n        if (!token) {\n            return res.status(401).json({\n                success: false,\n                error: \"Access token required\"\n            });\n        }\n        // Supabase JWT token doğrulama\n        const { data: { user }, error } = await _supabase_js__WEBPACK_IMPORTED_MODULE_1__.supabase.auth.getUser(token);\n        if (error || !user) {\n            return res.status(403).json({\n                success: false,\n                error: \"Invalid or expired token\"\n            });\n        }\n        // Kullanıcı bilgilerini request'e ekle\n        req.user = user;\n        req.userId = user.id;\n        next();\n    } catch (error) {\n        console.error(\"Auth middleware error:\", error);\n        return res.status(500).json({\n            success: false,\n            error: \"Authentication failed\"\n        });\n    }\n};\n/**\n * Opsiyonel kimlik doğrulama middleware'i\n * Token varsa doğrular, yoksa devam eder\n */ const optionalAuth = async (req, res, next)=>{\n    try {\n        const authHeader = req.headers[\"authorization\"];\n        const token = authHeader && authHeader.split(\" \")[1];\n        if (token) {\n            const { data: { user }, error } = await _supabase_js__WEBPACK_IMPORTED_MODULE_1__.supabase.auth.getUser(token);\n            if (!error && user) {\n                req.user = user;\n                req.userId = user.id;\n            }\n        }\n        next();\n    } catch (error) {\n        console.error(\"Optional auth middleware error:\", error);\n        next(); // Hata olsa bile devam et\n    }\n};\n/**\n * Admin yetkisi kontrolü\n */ const requireAdmin = async (req, res, next)=>{\n    try {\n        if (!req.user) {\n            return res.status(401).json({\n                success: false,\n                error: \"Authentication required\"\n            });\n        }\n        // Admin kontrolü - user metadata'dan veya ayrı admin tablosundan\n        const { data: userData, error } = await _supabase_js__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"users\").select(\"*\").eq(\"id\", req.userId).single();\n        if (error || !userData) {\n            return res.status(403).json({\n                success: false,\n                error: \"User not found\"\n            });\n        }\n        // Admin kontrolü (user metadata'da role field'ı olduğunu varsayıyoruz)\n        if (req.user.user_metadata?.role !== \"admin\" && req.user.app_metadata?.role !== \"admin\") {\n            return res.status(403).json({\n                success: false,\n                error: \"Admin access required\"\n            });\n        }\n        next();\n    } catch (error) {\n        console.error(\"Admin middleware error:\", error);\n        return res.status(500).json({\n            success: false,\n            error: \"Authorization failed\"\n        });\n    }\n};\n/**\n * Rate limiting middleware\n */ const rateLimitStore = new Map();\nconst rateLimit = (options = {})=>{\n    const { windowMs = 15 * 60 * 1000, max = 100, message = \"Too many requests, please try again later\" } = options;\n    return (req, res, next)=>{\n        const key = req.ip || req.connection.remoteAddress;\n        const now = Date.now();\n        if (!rateLimitStore.has(key)) {\n            rateLimitStore.set(key, {\n                count: 1,\n                resetTime: now + windowMs\n            });\n            return next();\n        }\n        const record = rateLimitStore.get(key);\n        if (now > record.resetTime) {\n            record.count = 1;\n            record.resetTime = now + windowMs;\n            return next();\n        }\n        if (record.count >= max) {\n            return res.status(429).json({\n                success: false,\n                error: message,\n                retryAfter: Math.ceil((record.resetTime - now) / 1000)\n            });\n        }\n        record.count++;\n        next();\n    };\n};\n/**\n * CORS middleware\n */ const corsMiddleware = (req, res, next)=>{\n    const allowedOrigins = [\n        \"http://localhost:3000\",\n        \"http://localhost:8081\",\n        \"http://localhost:8082\",\n        \"https://your-app-domain.com\" // Production domain\n    ];\n    const origin = req.headers.origin;\n    if (allowedOrigins.includes(origin)) {\n        res.setHeader(\"Access-Control-Allow-Origin\", origin);\n    }\n    res.setHeader(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\");\n    res.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\");\n    res.setHeader(\"Access-Control-Allow-Credentials\", \"true\");\n    if (req.method === \"OPTIONS\") {\n        res.status(200).end();\n        return;\n    }\n    next();\n};\n/**\n * Error handling middleware\n */ const errorHandler = (error, req, res, next)=>{\n    console.error(\"API Error:\", error);\n    // Supabase errors\n    if (error.code) {\n        return res.status(400).json({\n            success: false,\n            error: error.message,\n            code: error.code\n        });\n    }\n    // Validation errors\n    if (error.isJoi) {\n        return res.status(400).json({\n            success: false,\n            error: \"Validation failed\",\n            details: error.details.map((detail)=>detail.message)\n        });\n    }\n    // Default error\n    res.status(500).json({\n        success: false,\n        error: \"Internal server error\"\n    });\n};\n/**\n * Request logging middleware\n */ const requestLogger = async (req, res, next)=>{\n    const start = Date.now();\n    // Response'u intercept et\n    const originalSend = res.send;\n    let responseBody;\n    res.send = function(body) {\n        responseBody = body;\n        originalSend.call(this, body);\n    };\n    res.on(\"finish\", async ()=>{\n        const duration = Date.now() - start;\n        try {\n            // API log'u veritabanına kaydet\n            await _supabase_js__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"api_logs\").insert({\n                endpoint: req.originalUrl,\n                method: req.method,\n                user_id: req.userId || null,\n                ip_address: req.ip || req.connection.remoteAddress,\n                user_agent: req.headers[\"user-agent\"],\n                request_body: req.method !== \"GET\" ? req.body : null,\n                response_status: res.statusCode,\n                response_time: duration,\n                error_message: res.statusCode >= 400 ? responseBody : null\n            });\n        } catch (error) {\n            console.error(\"Failed to log API request:\", error);\n        }\n    });\n    next();\n};\n/**\n * Input validation middleware factory\n */ const validateInput = (schema)=>{\n    return (req, res, next)=>{\n        const { error } = schema.validate(req.body);\n        if (error) {\n            return res.status(400).json({\n                success: false,\n                error: \"Validation failed\",\n                details: error.details.map((detail)=>({\n                        field: detail.path.join(\".\"),\n                        message: detail.message\n                    }))\n            });\n        }\n        next();\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TWlGLGdCQUFnQixDQUFDQztJQUM1QixPQUFPLENBQUNwRixLQUFLQyxLQUFLQztRQUNoQixNQUFNLEVBQUVRLEtBQUssRUFBRSxHQUFHMEUsT0FBT0MsUUFBUSxDQUFDckYsSUFBSW9FLElBQUk7UUFFMUMsSUFBSTFELE9BQU87WUFDVCxPQUFPVCxJQUFJTSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUMxQkMsU0FBUztnQkFDVEMsT0FBTztnQkFDUGtELFNBQVNsRCxNQUFNa0QsT0FBTyxDQUFDQyxHQUFHLENBQUNDLENBQUFBLFNBQVc7d0JBQ3BDd0IsT0FBT3hCLE9BQU95QixJQUFJLENBQUNDLElBQUksQ0FBQzt3QkFDeEJ0RCxTQUFTNEIsT0FBTzVCLE9BQU87b0JBQ3pCO1lBQ0Y7UUFDRjtRQUVBaEM7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZmV0bGluay1iYWNrZW5kLy4vbGliL21pZGRsZXdhcmUvYXV0aC5qcz8yYzAwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IHN1cGFiYXNlLCBzdXBhYmFzZUFkbWluIH0gZnJvbSAnLi4vc3VwYWJhc2UuanMnO1xuXG4vKipcbiAqIEpXVCB0b2tlbiBkb8SfcnVsYW1hIG1pZGRsZXdhcmUnaVxuICogQHBhcmFtIHtPYmplY3R9IHJlcSAtIFJlcXVlc3Qgb2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gcmVzIC0gUmVzcG9uc2Ugb2JqZWN0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0IC0gTmV4dCBtaWRkbGV3YXJlIGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBhdXRoZW50aWNhdGVUb2tlbiA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddO1xuICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlciAmJiBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV07IC8vIEJlYXJlciBUT0tFTlxuXG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnQWNjZXNzIHRva2VuIHJlcXVpcmVkJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU3VwYWJhc2UgSldUIHRva2VuIGRvxJ9ydWxhbWFcbiAgICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKHRva2VuKTtcbiAgICBcbiAgICBpZiAoZXJyb3IgfHwgIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0ludmFsaWQgb3IgZXhwaXJlZCB0b2tlbidcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEt1bGxhbsSxY8SxIGJpbGdpbGVyaW5pIHJlcXVlc3QnZSBla2xlXG4gICAgcmVxLnVzZXIgPSB1c2VyO1xuICAgIHJlcS51c2VySWQgPSB1c2VyLmlkO1xuICAgIFxuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBdXRoIG1pZGRsZXdhcmUgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnQXV0aGVudGljYXRpb24gZmFpbGVkJ1xuICAgIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIE9wc2l5b25lbCBraW1saWsgZG/En3J1bGFtYSBtaWRkbGV3YXJlJ2lcbiAqIFRva2VuIHZhcnNhIGRvxJ9ydWxhciwgeW9rc2EgZGV2YW0gZWRlclxuICovXG5leHBvcnQgY29uc3Qgb3B0aW9uYWxBdXRoID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzWydhdXRob3JpemF0aW9uJ107XG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyICYmIGF1dGhIZWFkZXIuc3BsaXQoJyAnKVsxXTtcblxuICAgIGlmICh0b2tlbikge1xuICAgICAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcih0b2tlbik7XG4gICAgICBcbiAgICAgIGlmICghZXJyb3IgJiYgdXNlcikge1xuICAgICAgICByZXEudXNlciA9IHVzZXI7XG4gICAgICAgIHJlcS51c2VySWQgPSB1c2VyLmlkO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBuZXh0KCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignT3B0aW9uYWwgYXV0aCBtaWRkbGV3YXJlIGVycm9yOicsIGVycm9yKTtcbiAgICBuZXh0KCk7IC8vIEhhdGEgb2xzYSBiaWxlIGRldmFtIGV0XG4gIH1cbn07XG5cbi8qKlxuICogQWRtaW4geWV0a2lzaSBrb250cm9sw7xcbiAqL1xuZXhwb3J0IGNvbnN0IHJlcXVpcmVBZG1pbiA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICB0cnkge1xuICAgIGlmICghcmVxLnVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRtaW4ga29udHJvbMO8IC0gdXNlciBtZXRhZGF0YSdkYW4gdmV5YSBheXLEsSBhZG1pbiB0YWJsb3N1bmRhblxuICAgIGNvbnN0IHsgZGF0YTogdXNlckRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgcmVxLnVzZXJJZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvciB8fCAhdXNlckRhdGEpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRtaW4ga29udHJvbMO8ICh1c2VyIG1ldGFkYXRhJ2RhIHJvbGUgZmllbGQnxLEgb2xkdcSfdW51IHZhcnNhecSxeW9ydXopXG4gICAgaWYgKHJlcS51c2VyLnVzZXJfbWV0YWRhdGE/LnJvbGUgIT09ICdhZG1pbicgJiYgcmVxLnVzZXIuYXBwX21ldGFkYXRhPy5yb2xlICE9PSAnYWRtaW4nKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBuZXh0KCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQWRtaW4gbWlkZGxld2FyZSBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdBdXRob3JpemF0aW9uIGZhaWxlZCdcbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBSYXRlIGxpbWl0aW5nIG1pZGRsZXdhcmVcbiAqL1xuY29uc3QgcmF0ZUxpbWl0U3RvcmUgPSBuZXcgTWFwKCk7XG5cbmV4cG9ydCBjb25zdCByYXRlTGltaXQgPSAob3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHtcbiAgICB3aW5kb3dNcyA9IDE1ICogNjAgKiAxMDAwLCAvLyAxNSBkYWtpa2FcbiAgICBtYXggPSAxMDAsIC8vIG1ha3NpbXVtIGlzdGVrIHNhecSxc8SxXG4gICAgbWVzc2FnZSA9ICdUb28gbWFueSByZXF1ZXN0cywgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlcidcbiAgfSA9IG9wdGlvbnM7XG5cbiAgcmV0dXJuIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IGtleSA9IHJlcS5pcCB8fCByZXEuY29ubmVjdGlvbi5yZW1vdGVBZGRyZXNzO1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgXG4gICAgaWYgKCFyYXRlTGltaXRTdG9yZS5oYXMoa2V5KSkge1xuICAgICAgcmF0ZUxpbWl0U3RvcmUuc2V0KGtleSwge1xuICAgICAgICBjb3VudDogMSxcbiAgICAgICAgcmVzZXRUaW1lOiBub3cgKyB3aW5kb3dNc1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV4dCgpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlY29yZCA9IHJhdGVMaW1pdFN0b3JlLmdldChrZXkpO1xuICAgIFxuICAgIGlmIChub3cgPiByZWNvcmQucmVzZXRUaW1lKSB7XG4gICAgICByZWNvcmQuY291bnQgPSAxO1xuICAgICAgcmVjb3JkLnJlc2V0VGltZSA9IG5vdyArIHdpbmRvd01zO1xuICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICB9XG5cbiAgICBpZiAocmVjb3JkLmNvdW50ID49IG1heCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDI5KS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBtZXNzYWdlLFxuICAgICAgICByZXRyeUFmdGVyOiBNYXRoLmNlaWwoKHJlY29yZC5yZXNldFRpbWUgLSBub3cpIC8gMTAwMClcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlY29yZC5jb3VudCsrO1xuICAgIG5leHQoKTtcbiAgfTtcbn07XG5cbi8qKlxuICogQ09SUyBtaWRkbGV3YXJlXG4gKi9cbmV4cG9ydCBjb25zdCBjb3JzTWlkZGxld2FyZSA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCBhbGxvd2VkT3JpZ2lucyA9IFtcbiAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwJyxcbiAgICAnaHR0cDovL2xvY2FsaG9zdDo4MDgxJyxcbiAgICAnaHR0cDovL2xvY2FsaG9zdDo4MDgyJyxcbiAgICAnaHR0cHM6Ly95b3VyLWFwcC1kb21haW4uY29tJyAvLyBQcm9kdWN0aW9uIGRvbWFpblxuICBdO1xuXG4gIGNvbnN0IG9yaWdpbiA9IHJlcS5oZWFkZXJzLm9yaWdpbjtcbiAgXG4gIGlmIChhbGxvd2VkT3JpZ2lucy5pbmNsdWRlcyhvcmlnaW4pKSB7XG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgb3JpZ2luKTtcbiAgfVxuICBcbiAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBPU1QsIFBVVCwgREVMRVRFLCBPUFRJT05TJyk7XG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uJyk7XG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcblxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ09QVElPTlMnKSB7XG4gICAgcmVzLnN0YXR1cygyMDApLmVuZCgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIG5leHQoKTtcbn07XG5cbi8qKlxuICogRXJyb3IgaGFuZGxpbmcgbWlkZGxld2FyZVxuICovXG5leHBvcnQgY29uc3QgZXJyb3JIYW5kbGVyID0gKGVycm9yLCByZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zb2xlLmVycm9yKCdBUEkgRXJyb3I6JywgZXJyb3IpO1xuXG4gIC8vIFN1cGFiYXNlIGVycm9yc1xuICBpZiAoZXJyb3IuY29kZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgY29kZTogZXJyb3IuY29kZVxuICAgIH0pO1xuICB9XG5cbiAgLy8gVmFsaWRhdGlvbiBlcnJvcnNcbiAgaWYgKGVycm9yLmlzSm9pKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICBkZXRhaWxzOiBlcnJvci5kZXRhaWxzLm1hcChkZXRhaWwgPT4gZGV0YWlsLm1lc3NhZ2UpXG4gICAgfSk7XG4gIH1cblxuICAvLyBEZWZhdWx0IGVycm9yXG4gIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcidcbiAgfSk7XG59O1xuXG4vKipcbiAqIFJlcXVlc3QgbG9nZ2luZyBtaWRkbGV3YXJlXG4gKi9cbmV4cG9ydCBjb25zdCByZXF1ZXN0TG9nZ2VyID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgXG4gIC8vIFJlc3BvbnNlJ3UgaW50ZXJjZXB0IGV0XG4gIGNvbnN0IG9yaWdpbmFsU2VuZCA9IHJlcy5zZW5kO1xuICBsZXQgcmVzcG9uc2VCb2R5O1xuICBcbiAgcmVzLnNlbmQgPSBmdW5jdGlvbihib2R5KSB7XG4gICAgcmVzcG9uc2VCb2R5ID0gYm9keTtcbiAgICBvcmlnaW5hbFNlbmQuY2FsbCh0aGlzLCBib2R5KTtcbiAgfTtcblxuICByZXMub24oJ2ZpbmlzaCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydDtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQVBJIGxvZyd1IHZlcml0YWJhbsSxbmEga2F5ZGV0XG4gICAgICBhd2FpdCBzdXBhYmFzZUFkbWluLmZyb20oJ2FwaV9sb2dzJykuaW5zZXJ0KHtcbiAgICAgICAgZW5kcG9pbnQ6IHJlcS5vcmlnaW5hbFVybCxcbiAgICAgICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgICAgICB1c2VyX2lkOiByZXEudXNlcklkIHx8IG51bGwsXG4gICAgICAgIGlwX2FkZHJlc3M6IHJlcS5pcCB8fCByZXEuY29ubmVjdGlvbi5yZW1vdGVBZGRyZXNzLFxuICAgICAgICB1c2VyX2FnZW50OiByZXEuaGVhZGVyc1sndXNlci1hZ2VudCddLFxuICAgICAgICByZXF1ZXN0X2JvZHk6IHJlcS5tZXRob2QgIT09ICdHRVQnID8gcmVxLmJvZHkgOiBudWxsLFxuICAgICAgICByZXNwb25zZV9zdGF0dXM6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICByZXNwb25zZV90aW1lOiBkdXJhdGlvbixcbiAgICAgICAgZXJyb3JfbWVzc2FnZTogcmVzLnN0YXR1c0NvZGUgPj0gNDAwID8gcmVzcG9uc2VCb2R5IDogbnVsbFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2cgQVBJIHJlcXVlc3Q6JywgZXJyb3IpO1xuICAgIH1cbiAgfSk7XG5cbiAgbmV4dCgpO1xufTtcblxuLyoqXG4gKiBJbnB1dCB2YWxpZGF0aW9uIG1pZGRsZXdhcmUgZmFjdG9yeVxuICovXG5leHBvcnQgY29uc3QgdmFsaWRhdGVJbnB1dCA9IChzY2hlbWEpID0+IHtcbiAgcmV0dXJuIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHsgZXJyb3IgfSA9IHNjaGVtYS52YWxpZGF0ZShyZXEuYm9keSk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgIGRldGFpbHM6IGVycm9yLmRldGFpbHMubWFwKGRldGFpbCA9PiAoe1xuICAgICAgICAgIGZpZWxkOiBkZXRhaWwucGF0aC5qb2luKCcuJyksXG4gICAgICAgICAgbWVzc2FnZTogZGV0YWlsLm1lc3NhZ2VcbiAgICAgICAgfSkpXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgbmV4dCgpO1xuICB9O1xufTsiXSwibmFtZXMiOlsiand0Iiwic3VwYWJhc2UiLCJzdXBhYmFzZUFkbWluIiwiYXV0aGVudGljYXRlVG9rZW4iLCJyZXEiLCJyZXMiLCJuZXh0IiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJ0b2tlbiIsInNwbGl0Iiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsImRhdGEiLCJ1c2VyIiwiYXV0aCIsImdldFVzZXIiLCJ1c2VySWQiLCJpZCIsImNvbnNvbGUiLCJvcHRpb25hbEF1dGgiLCJyZXF1aXJlQWRtaW4iLCJ1c2VyRGF0YSIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsInVzZXJfbWV0YWRhdGEiLCJyb2xlIiwiYXBwX21ldGFkYXRhIiwicmF0ZUxpbWl0U3RvcmUiLCJNYXAiLCJyYXRlTGltaXQiLCJvcHRpb25zIiwid2luZG93TXMiLCJtYXgiLCJtZXNzYWdlIiwia2V5IiwiaXAiLCJjb25uZWN0aW9uIiwicmVtb3RlQWRkcmVzcyIsIm5vdyIsIkRhdGUiLCJoYXMiLCJzZXQiLCJjb3VudCIsInJlc2V0VGltZSIsInJlY29yZCIsImdldCIsInJldHJ5QWZ0ZXIiLCJNYXRoIiwiY2VpbCIsImNvcnNNaWRkbGV3YXJlIiwiYWxsb3dlZE9yaWdpbnMiLCJvcmlnaW4iLCJpbmNsdWRlcyIsInNldEhlYWRlciIsIm1ldGhvZCIsImVuZCIsImVycm9ySGFuZGxlciIsImNvZGUiLCJpc0pvaSIsImRldGFpbHMiLCJtYXAiLCJkZXRhaWwiLCJyZXF1ZXN0TG9nZ2VyIiwic3RhcnQiLCJvcmlnaW5hbFNlbmQiLCJzZW5kIiwicmVzcG9uc2VCb2R5IiwiYm9keSIsImNhbGwiLCJvbiIsImR1cmF0aW9uIiwiaW5zZXJ0IiwiZW5kcG9pbnQiLCJvcmlnaW5hbFVybCIsInVzZXJfaWQiLCJpcF9hZGRyZXNzIiwidXNlcl9hZ2VudCIsInJlcXVlc3RfYm9keSIsInJlc3BvbnNlX3N0YXR1cyIsInN0YXR1c0NvZGUiLCJyZXNwb25zZV90aW1lIiwiZXJyb3JfbWVzc2FnZSIsInZhbGlkYXRlSW5wdXQiLCJzY2hlbWEiLCJ2YWxpZGF0ZSIsImZpZWxkIiwicGF0aCIsImpvaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/middleware/auth.js\n");

/***/ }),

/***/ "(api)/./lib/supabase.js":
/*!*************************!*\
  !*** ./lib/supabase.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabaseUrl = \"https://rjzvcanjkdwukasjaeib.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJqenZjYW5qa2R3dWthc2phZWliIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU2ODU1NDQsImV4cCI6MjA3MTI2MTU0NH0.xSQyVF6axjElOB2Ti6zcP5fO_Zxnbdl58wi7eR93Oy0\";\nconst supabaseServiceRoleKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJqenZjYW5qa2R3dWthc2phZWliIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NTY4NTU0NCwiZXhwIjoyMDcxMjYxNTQ0fQ.Oj8qJGHQJQGQJQGQJQGQJQGQJQGQJQGQJQGQJQGQJQG\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\"Missing Supabase environment variables\");\n}\n// Public client (anon key)\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        autoRefreshToken: true,\n        persistSession: true,\n        detectSessionInUrl: false\n    }\n});\n// Admin client (service role key) - sadece server-side kullanım için\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceRoleKey || supabaseAnonKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n// Database helper functions\nconst db = {\n    // Users table operations\n    users: {\n        async create (userData) {\n            const { data, error } = await supabaseAdmin.from(\"users\").insert(userData).select().single();\n            if (error) throw error;\n            return data;\n        },\n        async findById (id) {\n            const { data, error } = await supabaseAdmin.from(\"users\").select(\"*\").eq(\"id\", id).single();\n            if (error && error.code !== \"PGRST116\") throw error;\n            return data;\n        },\n        async findByEmail (email) {\n            const { data, error } = await supabaseAdmin.from(\"users\").select(\"*\").eq(\"email\", email).single();\n            if (error && error.code !== \"PGRST116\") throw error;\n            return data;\n        },\n        async update (id, updates) {\n            const { data, error } = await supabaseAdmin.from(\"users\").update(updates).eq(\"id\", id).select().single();\n            if (error) throw error;\n            return data;\n        }\n    },\n    // Earthquakes table operations\n    earthquakes: {\n        async create (earthquakeData) {\n            const { data, error } = await supabaseAdmin.from(\"earthquakes\").insert(earthquakeData).select().single();\n            if (error) throw error;\n            return data;\n        },\n        async findAll (limit = 50, offset = 0) {\n            const { data, error } = await supabase.from(\"earthquakes\").select(\"*\").order(\"date\", {\n                ascending: false\n            }).range(offset, offset + limit - 1);\n            if (error) throw error;\n            return data;\n        },\n        async findById (id) {\n            const { data, error } = await supabase.from(\"earthquakes\").select(\"*\").eq(\"id\", id).single();\n            if (error && error.code !== \"PGRST116\") throw error;\n            return data;\n        },\n        async findByMagnitudeRange (minMagnitude, maxMagnitude) {\n            const { data, error } = await supabase.from(\"earthquakes\").select(\"*\").gte(\"magnitude\", minMagnitude).lte(\"magnitude\", maxMagnitude).order(\"date\", {\n                ascending: false\n            });\n            if (error) throw error;\n            return data;\n        }\n    },\n    // Notifications table operations\n    notifications: {\n        async create (notificationData) {\n            const { data, error } = await supabaseAdmin.from(\"notifications\").insert(notificationData).select().single();\n            if (error) throw error;\n            return data;\n        },\n        async findByUserId (userId, limit = 20) {\n            const { data, error } = await supabase.from(\"notifications\").select(\"*\").eq(\"user_id\", userId).order(\"created_at\", {\n                ascending: false\n            }).limit(limit);\n            if (error) throw error;\n            return data;\n        },\n        async markAsRead (id) {\n            const { data, error } = await supabaseAdmin.from(\"notifications\").update({\n                read: true,\n                read_at: new Date().toISOString()\n            }).eq(\"id\", id).select().single();\n            if (error) throw error;\n            return data;\n        }\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (supabase);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTSxDQUFDO2dCQUFFb0IsTUFBTTtnQkFBTUMsU0FBUyxJQUFJQyxPQUFPQyxXQUFXO1lBQUcsR0FDdkQzQixFQUFFLENBQUMsTUFBTUQsSUFDVEgsTUFBTSxHQUNOQyxNQUFNO1lBRVQsSUFBSUosT0FBTyxNQUFNQTtZQUNqQixPQUFPRDtRQUNUO0lBQ0Y7QUFDRixFQUFFO0FBRUYsaUVBQWVWLFFBQVFBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZmV0bGluay1iYWNrZW5kLy4vbGliL3N1cGFiYXNlLmpzPzE1OTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9VUkw7XG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9BTk9OX0tFWTtcbmNvbnN0IHN1cGFiYXNlU2VydmljZVJvbGVLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xuXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xufVxuXG4vLyBQdWJsaWMgY2xpZW50IChhbm9uIGtleSlcbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5LCB7XG4gIGF1dGg6IHtcbiAgICBhdXRvUmVmcmVzaFRva2VuOiB0cnVlLFxuICAgIHBlcnNpc3RTZXNzaW9uOiB0cnVlLFxuICAgIGRldGVjdFNlc3Npb25JblVybDogZmFsc2VcbiAgfVxufSk7XG5cbi8vIEFkbWluIGNsaWVudCAoc2VydmljZSByb2xlIGtleSkgLSBzYWRlY2Ugc2VydmVyLXNpZGUga3VsbGFuxLFtIGnDp2luXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChcbiAgc3VwYWJhc2VVcmwsXG4gIHN1cGFiYXNlU2VydmljZVJvbGVLZXkgfHwgc3VwYWJhc2VBbm9uS2V5LFxuICB7XG4gICAgYXV0aDoge1xuICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2VcbiAgICB9XG4gIH1cbik7XG5cbi8vIERhdGFiYXNlIGhlbHBlciBmdW5jdGlvbnNcbmV4cG9ydCBjb25zdCBkYiA9IHtcbiAgLy8gVXNlcnMgdGFibGUgb3BlcmF0aW9uc1xuICB1c2Vyczoge1xuICAgIGFzeW5jIGNyZWF0ZSh1c2VyRGF0YSkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgICAuaW5zZXJ0KHVzZXJEYXRhKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSxcbiAgICBcbiAgICBhc3luYyBmaW5kQnlJZChpZCkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgICAuc2luZ2xlKCk7XG4gICAgICBcbiAgICAgIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB0aHJvdyBlcnJvcjtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgXG4gICAgYXN5bmMgZmluZEJ5RW1haWwoZW1haWwpIHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ3VzZXJzJylcbiAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgIC5lcSgnZW1haWwnLCBlbWFpbClcbiAgICAgICAgLnNpbmdsZSgpO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3IgJiYgZXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2JykgdGhyb3cgZXJyb3I7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LFxuICAgIFxuICAgIGFzeW5jIHVwZGF0ZShpZCwgdXBkYXRlcykge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgICAudXBkYXRlKHVwZGF0ZXMpXG4gICAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgfSxcbiAgXG4gIC8vIEVhcnRocXVha2VzIHRhYmxlIG9wZXJhdGlvbnNcbiAgZWFydGhxdWFrZXM6IHtcbiAgICBhc3luYyBjcmVhdGUoZWFydGhxdWFrZURhdGEpIHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ2VhcnRocXVha2VzJylcbiAgICAgICAgLmluc2VydChlYXJ0aHF1YWtlRGF0YSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgXG4gICAgYXN5bmMgZmluZEFsbChsaW1pdCA9IDUwLCBvZmZzZXQgPSAwKSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnZWFydGhxdWFrZXMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLm9yZGVyKCdkYXRlJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAgIC5yYW5nZShvZmZzZXQsIG9mZnNldCArIGxpbWl0IC0gMSk7XG4gICAgICBcbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LFxuICAgIFxuICAgIGFzeW5jIGZpbmRCeUlkKGlkKSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnZWFydGhxdWFrZXMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgICAuc2luZ2xlKCk7XG4gICAgICBcbiAgICAgIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB0aHJvdyBlcnJvcjtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgXG4gICAgYXN5bmMgZmluZEJ5TWFnbml0dWRlUmFuZ2UobWluTWFnbml0dWRlLCBtYXhNYWduaXR1ZGUpIHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdlYXJ0aHF1YWtlcycpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAuZ3RlKCdtYWduaXR1ZGUnLCBtaW5NYWduaXR1ZGUpXG4gICAgICAgIC5sdGUoJ21hZ25pdHVkZScsIG1heE1hZ25pdHVkZSlcbiAgICAgICAgLm9yZGVyKCdkYXRlJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICB9LFxuICBcbiAgLy8gTm90aWZpY2F0aW9ucyB0YWJsZSBvcGVyYXRpb25zXG4gIG5vdGlmaWNhdGlvbnM6IHtcbiAgICBhc3luYyBjcmVhdGUobm90aWZpY2F0aW9uRGF0YSkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgnbm90aWZpY2F0aW9ucycpXG4gICAgICAgIC5pbnNlcnQobm90aWZpY2F0aW9uRGF0YSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgXG4gICAgYXN5bmMgZmluZEJ5VXNlcklkKHVzZXJJZCwgbGltaXQgPSAyMCkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ25vdGlmaWNhdGlvbnMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxuICAgICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAgICAgLmxpbWl0KGxpbWl0KTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgXG4gICAgYXN5bmMgbWFya0FzUmVhZChpZCkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgnbm90aWZpY2F0aW9ucycpXG4gICAgICAgIC51cGRhdGUoeyByZWFkOiB0cnVlLCByZWFkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSlcbiAgICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBzdXBhYmFzZTsiXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiU1VQQUJBU0VfQU5PTl9LRVkiLCJzdXBhYmFzZVNlcnZpY2VSb2xlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIiwic3VwYWJhc2UiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwiZGV0ZWN0U2Vzc2lvbkluVXJsIiwic3VwYWJhc2VBZG1pbiIsImRiIiwidXNlcnMiLCJjcmVhdGUiLCJ1c2VyRGF0YSIsImRhdGEiLCJlcnJvciIsImZyb20iLCJpbnNlcnQiLCJzZWxlY3QiLCJzaW5nbGUiLCJmaW5kQnlJZCIsImlkIiwiZXEiLCJjb2RlIiwiZmluZEJ5RW1haWwiLCJlbWFpbCIsInVwZGF0ZSIsInVwZGF0ZXMiLCJlYXJ0aHF1YWtlcyIsImVhcnRocXVha2VEYXRhIiwiZmluZEFsbCIsImxpbWl0Iiwib2Zmc2V0Iiwib3JkZXIiLCJhc2NlbmRpbmciLCJyYW5nZSIsImZpbmRCeU1hZ25pdHVkZVJhbmdlIiwibWluTWFnbml0dWRlIiwibWF4TWFnbml0dWRlIiwiZ3RlIiwibHRlIiwibm90aWZpY2F0aW9ucyIsIm5vdGlmaWNhdGlvbkRhdGEiLCJmaW5kQnlVc2VySWQiLCJ1c2VySWQiLCJtYXJrQXNSZWFkIiwicmVhZCIsInJlYWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/supabase.js\n");

/***/ }),

/***/ "(api)/./pages/api/posts/index.js":
/*!**********************************!*\
  !*** ./pages/api/posts/index.js ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_middleware_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/middleware/auth */ \"(api)/./lib/middleware/auth.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"uuid\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_1__]);\nuuid__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// In-memory storage for posts\nlet posts = [\n    {\n        id: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)(),\n        user_id: \"550e8400-e29b-41d4-a716-446655440000\",\n        title: \"Afet Hazırlığı \\xd6nerileri\",\n        content: \"Deprem \\xe7antası hazırlamak i\\xe7in gerekli malzemeler: Su, konserve yiyecekler, el feneri, pil, ilk yardım malzemeleri ve \\xf6nemli belgelerinizin kopyaları.\",\n        image_url: null,\n        image_urls: null,\n        likes_count: 15,\n        comments_count: 8,\n        shares_count: 3,\n        is_active: true,\n        created_at: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n        updated_at: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n        users: {\n            id: \"550e8400-e29b-41d4-a716-446655440000\",\n            full_name: \"Ahmet Yılmaz\",\n            email: \"ahmet@example.com\",\n            avatar_url: null\n        }\n    },\n    {\n        id: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)(),\n        user_id: \"550e8400-e29b-41d4-a716-446655440001\",\n        title: \"Deprem Anında Yapılması Gerekenler\",\n        content: \"Deprem sırasında sakin kalın, masa altına saklanın veya hayat \\xfc\\xe7geni oluşturun. Asans\\xf6r kullanmayın, merdivenleri tercih edin.\",\n        image_url: null,\n        image_urls: null,\n        likes_count: 23,\n        comments_count: 12,\n        shares_count: 7,\n        is_active: true,\n        created_at: new Date(Date.now() - 4 * 60 * 60 * 1000).toISOString(),\n        updated_at: new Date(Date.now() - 4 * 60 * 60 * 1000).toISOString(),\n        users: {\n            id: \"550e8400-e29b-41d4-a716-446655440001\",\n            full_name: \"Fatma Demir\",\n            email: \"fatma@example.com\",\n            avatar_url: null\n        }\n    },\n    {\n        id: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)(),\n        user_id: \"550e8400-e29b-41d4-a716-446655440002\",\n        title: \"Yangın G\\xfcvenliği\",\n        content: \"Evde yangın s\\xf6nd\\xfcr\\xfcc\\xfc bulundurun, ka\\xe7ış planı yapın ve d\\xfczenli olarak duman dedekt\\xf6r\\xfc pillerini kontrol edin.\",\n        image_url: null,\n        image_urls: null,\n        likes_count: 9,\n        comments_count: 4,\n        shares_count: 2,\n        is_active: true,\n        created_at: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString(),\n        updated_at: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString(),\n        users: {\n            id: \"550e8400-e29b-41d4-a716-446655440002\",\n            full_name: \"Mehmet Kaya\",\n            email: \"mehmet@example.com\",\n            avatar_url: null\n        }\n    },\n    {\n        id: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)(),\n        user_id: \"550e8400-e29b-41d4-a716-446655440003\",\n        title: \"İletişim Planı\",\n        content: \"Aile \\xfcyeleriyle acil durum iletişim planı oluşturun. Şehir dışından bir yakınınızın telefon numarasını herkes bilsin.\",\n        image_url: null,\n        image_urls: null,\n        likes_count: 18,\n        comments_count: 6,\n        shares_count: 5,\n        is_active: true,\n        created_at: new Date(Date.now() - 8 * 60 * 60 * 1000).toISOString(),\n        updated_at: new Date(Date.now() - 8 * 60 * 60 * 1000).toISOString(),\n        users: {\n            id: \"550e8400-e29b-41d4-a716-446655440003\",\n            full_name: \"Ayşe \\xd6zkan\",\n            email: \"ayse@example.com\",\n            avatar_url: null\n        }\n    },\n    {\n        id: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)(),\n        user_id: \"550e8400-e29b-41d4-a716-446655440004\",\n        title: \"Su Baskını \\xd6nlemleri\",\n        content: \"Yağmurlu havalarda alt katlarda yaşayanlar dikkatli olmalı. Elektrik tesisatını kontrol ettirin ve su baskını i\\xe7in acil plan yapın.\",\n        image_url: null,\n        image_urls: null,\n        likes_count: 11,\n        comments_count: 3,\n        shares_count: 1,\n        is_active: true,\n        created_at: new Date(Date.now() - 12 * 60 * 60 * 1000).toISOString(),\n        updated_at: new Date(Date.now() - 12 * 60 * 60 * 1000).toISOString(),\n        users: {\n            id: \"550e8400-e29b-41d4-a716-446655440004\",\n            full_name: \"Ali \\xc7elik\",\n            email: \"ali@example.com\",\n            avatar_url: null\n        }\n    }\n];\nasync function handler(req, res) {\n    // CORS headers\n    res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n    res.setHeader(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\");\n    res.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\");\n    if (req.method === \"OPTIONS\") {\n        return res.status(200).end();\n    }\n    try {\n        switch(req.method){\n            case \"GET\":\n                return await getPosts(req, res);\n            case \"POST\":\n                return await createPost(req, res);\n            case \"DELETE\":\n                return await deleteAllPosts(req, res);\n            default:\n                return res.status(405).json({\n                    error: \"Method not allowed\"\n                });\n        }\n    } catch (error) {\n        console.error(\"Posts API error:\", error);\n        return res.status(500).json({\n            error: \"Internal server error\",\n            message: error.message\n        });\n    }\n}\n// Get all posts with user information and interaction counts\nasync function getPosts(req, res) {\n    try {\n        const { page = 1, limit = 10, user_id } = req.query;\n        const offset = (page - 1) * limit;\n        // Filter active posts\n        let filteredPosts = posts.filter((post)=>post.is_active);\n        // Filter by user_id if provided\n        if (user_id) {\n            filteredPosts = filteredPosts.filter((post)=>post.user_id === user_id);\n        }\n        // Sort by created_at descending\n        filteredPosts.sort((a, b)=>new Date(b.created_at) - new Date(a.created_at));\n        // Apply pagination\n        const paginatedPosts = filteredPosts.slice(offset, offset + parseInt(limit));\n        return res.status(200).json({\n            posts: paginatedPosts,\n            pagination: {\n                page: parseInt(page),\n                limit: parseInt(limit),\n                total: filteredPosts.length,\n                totalPages: Math.ceil(filteredPosts.length / limit)\n            }\n        });\n    } catch (error) {\n        console.error(\"Get posts error:\", error);\n        return res.status(500).json({\n            error: \"Failed to fetch posts\"\n        });\n    }\n}\n// Create a new post\nasync function createPost(req, res) {\n    try {\n        const { title, content, image_url, image_urls } = req.body;\n        // Validation\n        if (!title || !content) {\n            return res.status(400).json({\n                error: \"Title and content are required\"\n            });\n        }\n        if (title.length > 255) {\n            return res.status(400).json({\n                error: \"Title must be less than 255 characters\"\n            });\n        }\n        if (content.length > 5000) {\n            return res.status(400).json({\n                error: \"Content must be less than 5000 characters\"\n            });\n        }\n        // Create new post object\n        const newPost = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)(),\n            user_id: \"550e8400-e29b-41d4-a716-446655440000\",\n            title: title.trim(),\n            content: content.trim(),\n            image_url: image_url || null,\n            image_urls: image_urls || null,\n            likes_count: 0,\n            comments_count: 0,\n            shares_count: 0,\n            is_active: true,\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n            users: {\n                id: \"550e8400-e29b-41d4-a716-446655440000\",\n                full_name: \"Yeni Kullanıcı\",\n                email: \"user@example.com\",\n                avatar_url: null\n            }\n        };\n        // Add to in-memory storage\n        posts.unshift(newPost); // Add to beginning of array\n        return res.status(201).json({\n            message: \"Post created successfully\",\n            post: newPost\n        });\n    } catch (error) {\n        console.error(\"Create post error:\", error);\n        return res.status(500).json({\n            error: \"Failed to create post\"\n        });\n    }\n}\n// Delete all posts (admin function)\nasync function deleteAllPosts(req, res) {\n    try {\n        const { confirm_delete_all } = req.body;\n        if (confirm_delete_all !== \"YES_DELETE_ALL_POSTS\") {\n            return res.status(400).json({\n                error: 'Confirmation required. Set confirm_delete_all to \"YES_DELETE_ALL_POSTS\"'\n            });\n        }\n        // Clear in-memory storage\n        posts.length = 0;\n        return res.status(200).json({\n            message: \"All posts have been permanently deleted\"\n        });\n    } catch (error) {\n        console.error(\"Delete all posts error:\", error);\n        return res.status(500).json({\n            error: \"Failed to delete posts\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcG9zdHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQThEO0FBQzFCO0FBRXBDLDhCQUE4QjtBQUM5QixJQUFJRyxRQUFRO0lBQ1Y7UUFDRUMsSUFBSUYsd0NBQU1BO1FBQ1ZHLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxTQUFTO1FBQ1RDLFdBQVc7UUFDWEMsWUFBWTtRQUNaQyxhQUFhO1FBQ2JDLGdCQUFnQjtRQUNoQkMsY0FBYztRQUNkQyxXQUFXO1FBQ1hDLFlBQVksSUFBSUMsS0FBS0EsS0FBS0MsR0FBRyxLQUFLLElBQUksS0FBSyxLQUFLLE1BQU1DLFdBQVc7UUFDakVDLFlBQVksSUFBSUgsS0FBS0EsS0FBS0MsR0FBRyxLQUFLLElBQUksS0FBSyxLQUFLLE1BQU1DLFdBQVc7UUFDakVFLE9BQU87WUFDTGYsSUFBSTtZQUNKZ0IsV0FBVztZQUNYQyxPQUFPO1lBQ1BDLFlBQVk7UUFDZDtJQUNGO0lBQ0E7UUFDRWxCLElBQUlGLHdDQUFNQTtRQUNWRyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsU0FBUztRQUNUQyxXQUFXO1FBQ1hDLFlBQVk7UUFDWkMsYUFBYTtRQUNiQyxnQkFBZ0I7UUFDaEJDLGNBQWM7UUFDZEMsV0FBVztRQUNYQyxZQUFZLElBQUlDLEtBQUtBLEtBQUtDLEdBQUcsS0FBSyxJQUFJLEtBQUssS0FBSyxNQUFNQyxXQUFXO1FBQ2pFQyxZQUFZLElBQUlILEtBQUtBLEtBQUtDLEdBQUcsS0FBSyxJQUFJLEtBQUssS0FBSyxNQUFNQyxXQUFXO1FBQ2pFRSxPQUFPO1lBQ0xmLElBQUk7WUFDSmdCLFdBQVc7WUFDWEMsT0FBTztZQUNQQyxZQUFZO1FBQ2Q7SUFDRjtJQUNBO1FBQ0VsQixJQUFJRix3Q0FBTUE7UUFDVkcsU0FBUztRQUNUQyxPQUFPO1FBQ1BDLFNBQVM7UUFDVEMsV0FBVztRQUNYQyxZQUFZO1FBQ1pDLGFBQWE7UUFDYkMsZ0JBQWdCO1FBQ2hCQyxjQUFjO1FBQ2RDLFdBQVc7UUFDWEMsWUFBWSxJQUFJQyxLQUFLQSxLQUFLQyxHQUFHLEtBQUssSUFBSSxLQUFLLEtBQUssTUFBTUMsV0FBVztRQUNqRUMsWUFBWSxJQUFJSCxLQUFLQSxLQUFLQyxHQUFHLEtBQUssSUFBSSxLQUFLLEtBQUssTUFBTUMsV0FBVztRQUNqRUUsT0FBTztZQUNMZixJQUFJO1lBQ0pnQixXQUFXO1lBQ1hDLE9BQU87WUFDUEMsWUFBWTtRQUNkO0lBQ0Y7SUFDQTtRQUNFbEIsSUFBSUYsd0NBQU1BO1FBQ1ZHLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxTQUFTO1FBQ1RDLFdBQVc7UUFDWEMsWUFBWTtRQUNaQyxhQUFhO1FBQ2JDLGdCQUFnQjtRQUNoQkMsY0FBYztRQUNkQyxXQUFXO1FBQ1hDLFlBQVksSUFBSUMsS0FBS0EsS0FBS0MsR0FBRyxLQUFLLElBQUksS0FBSyxLQUFLLE1BQU1DLFdBQVc7UUFDakVDLFlBQVksSUFBSUgsS0FBS0EsS0FBS0MsR0FBRyxLQUFLLElBQUksS0FBSyxLQUFLLE1BQU1DLFdBQVc7UUFDakVFLE9BQU87WUFDTGYsSUFBSTtZQUNKZ0IsV0FBVztZQUNYQyxPQUFPO1lBQ1BDLFlBQVk7UUFDZDtJQUNGO0lBQ0E7UUFDRWxCLElBQUlGLHdDQUFNQTtRQUNWRyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsU0FBUztRQUNUQyxXQUFXO1FBQ1hDLFlBQVk7UUFDWkMsYUFBYTtRQUNiQyxnQkFBZ0I7UUFDaEJDLGNBQWM7UUFDZEMsV0FBVztRQUNYQyxZQUFZLElBQUlDLEtBQUtBLEtBQUtDLEdBQUcsS0FBSyxLQUFLLEtBQUssS0FBSyxNQUFNQyxXQUFXO1FBQ2xFQyxZQUFZLElBQUlILEtBQUtBLEtBQUtDLEdBQUcsS0FBSyxLQUFLLEtBQUssS0FBSyxNQUFNQyxXQUFXO1FBQ2xFRSxPQUFPO1lBQ0xmLElBQUk7WUFDSmdCLFdBQVc7WUFDWEMsT0FBTztZQUNQQyxZQUFZO1FBQ2Q7SUFDRjtDQUNEO0FBRWMsZUFBZUMsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLGVBQWU7SUFDZkEsSUFBSUMsU0FBUyxDQUFDLCtCQUErQjtJQUM3Q0QsSUFBSUMsU0FBUyxDQUFDLGdDQUFnQztJQUM5Q0QsSUFBSUMsU0FBUyxDQUFDLGdDQUFnQztJQUU5QyxJQUFJRixJQUFJRyxNQUFNLEtBQUssV0FBVztRQUM1QixPQUFPRixJQUFJRyxNQUFNLENBQUMsS0FBS0MsR0FBRztJQUM1QjtJQUVBLElBQUk7UUFDRixPQUFRTCxJQUFJRyxNQUFNO1lBQ2hCLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNRyxTQUFTTixLQUFLQztZQUM3QixLQUFLO2dCQUNILE9BQU8sTUFBTU0sV0FBV1AsS0FBS0M7WUFDL0IsS0FBSztnQkFDSCxPQUFPLE1BQU1PLGVBQWVSLEtBQUtDO1lBQ25DO2dCQUNFLE9BQU9BLElBQUlHLE1BQU0sQ0FBQyxLQUFLSyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQXFCO1FBQzlEO0lBQ0YsRUFBRSxPQUFPQSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxvQkFBb0JBO1FBQ2xDLE9BQU9ULElBQUlHLE1BQU0sQ0FBQyxLQUFLSyxJQUFJLENBQUM7WUFDMUJDLE9BQU87WUFDUEUsU0FBU0YsTUFBTUUsT0FBTztRQUN4QjtJQUNGO0FBQ0Y7QUFFQSw2REFBNkQ7QUFDN0QsZUFBZU4sU0FBU04sR0FBRyxFQUFFQyxHQUFHO0lBQzlCLElBQUk7UUFDRixNQUFNLEVBQUVZLE9BQU8sQ0FBQyxFQUFFQyxRQUFRLEVBQUUsRUFBRWpDLE9BQU8sRUFBRSxHQUFHbUIsSUFBSWUsS0FBSztRQUNuRCxNQUFNQyxTQUFTLENBQUNILE9BQU8sS0FBS0M7UUFFNUIsc0JBQXNCO1FBQ3RCLElBQUlHLGdCQUFnQnRDLE1BQU11QyxNQUFNLENBQUNDLENBQUFBLE9BQVFBLEtBQUs5QixTQUFTO1FBRXZELGdDQUFnQztRQUNoQyxJQUFJUixTQUFTO1lBQ1hvQyxnQkFBZ0JBLGNBQWNDLE1BQU0sQ0FBQ0MsQ0FBQUEsT0FBUUEsS0FBS3RDLE9BQU8sS0FBS0E7UUFDaEU7UUFFQSxnQ0FBZ0M7UUFDaENvQyxjQUFjRyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTSxJQUFJL0IsS0FBSytCLEVBQUVoQyxVQUFVLElBQUksSUFBSUMsS0FBSzhCLEVBQUUvQixVQUFVO1FBRTNFLG1CQUFtQjtRQUNuQixNQUFNaUMsaUJBQWlCTixjQUFjTyxLQUFLLENBQUNSLFFBQVFBLFNBQVNTLFNBQVNYO1FBRXJFLE9BQU9iLElBQUlHLE1BQU0sQ0FBQyxLQUFLSyxJQUFJLENBQUM7WUFDMUI5QixPQUFPNEM7WUFDUEcsWUFBWTtnQkFDVmIsTUFBTVksU0FBU1o7Z0JBQ2ZDLE9BQU9XLFNBQVNYO2dCQUNoQmEsT0FBT1YsY0FBY1csTUFBTTtnQkFDM0JDLFlBQVlDLEtBQUtDLElBQUksQ0FBQ2QsY0FBY1csTUFBTSxHQUFHZDtZQUMvQztRQUNGO0lBQ0YsRUFBRSxPQUFPSixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxvQkFBb0JBO1FBQ2xDLE9BQU9ULElBQUlHLE1BQU0sQ0FBQyxLQUFLSyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUF3QjtJQUMvRDtBQUNGO0FBRUEsb0JBQW9CO0FBQ3BCLGVBQWVILFdBQVdQLEdBQUcsRUFBRUMsR0FBRztJQUNoQyxJQUFJO1FBQ0YsTUFBTSxFQUFFbkIsS0FBSyxFQUFFQyxPQUFPLEVBQUVDLFNBQVMsRUFBRUMsVUFBVSxFQUFFLEdBQUdlLElBQUlnQyxJQUFJO1FBRTFELGFBQWE7UUFDYixJQUFJLENBQUNsRCxTQUFTLENBQUNDLFNBQVM7WUFDdEIsT0FBT2tCLElBQUlHLE1BQU0sQ0FBQyxLQUFLSyxJQUFJLENBQUM7Z0JBQzFCQyxPQUFPO1lBQ1Q7UUFDRjtRQUVBLElBQUk1QixNQUFNOEMsTUFBTSxHQUFHLEtBQUs7WUFDdEIsT0FBTzNCLElBQUlHLE1BQU0sQ0FBQyxLQUFLSyxJQUFJLENBQUM7Z0JBQzFCQyxPQUFPO1lBQ1Q7UUFDRjtRQUVBLElBQUkzQixRQUFRNkMsTUFBTSxHQUFHLE1BQU07WUFDekIsT0FBTzNCLElBQUlHLE1BQU0sQ0FBQyxLQUFLSyxJQUFJLENBQUM7Z0JBQzFCQyxPQUFPO1lBQ1Q7UUFDRjtRQUVBLHlCQUF5QjtRQUN6QixNQUFNdUIsVUFBVTtZQUNkckQsSUFBSUYsd0NBQU1BO1lBQ1ZHLFNBQVM7WUFDVEMsT0FBT0EsTUFBTW9ELElBQUk7WUFDakJuRCxTQUFTQSxRQUFRbUQsSUFBSTtZQUNyQmxELFdBQVdBLGFBQWE7WUFDeEJDLFlBQVlBLGNBQWM7WUFDMUJDLGFBQWE7WUFDYkMsZ0JBQWdCO1lBQ2hCQyxjQUFjO1lBQ2RDLFdBQVc7WUFDWEMsWUFBWSxJQUFJQyxPQUFPRSxXQUFXO1lBQ2xDQyxZQUFZLElBQUlILE9BQU9FLFdBQVc7WUFDbENFLE9BQU87Z0JBQ0xmLElBQUk7Z0JBQ0pnQixXQUFXO2dCQUNYQyxPQUFPO2dCQUNQQyxZQUFZO1lBQ2Q7UUFDRjtRQUVBLDJCQUEyQjtRQUMzQm5CLE1BQU13RCxPQUFPLENBQUNGLFVBQVUsNEJBQTRCO1FBRXBELE9BQU9oQyxJQUFJRyxNQUFNLENBQUMsS0FBS0ssSUFBSSxDQUFDO1lBQzFCRyxTQUFTO1lBQ1RPLE1BQU1jO1FBQ1I7SUFDRixFQUFFLE9BQU92QixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxzQkFBc0JBO1FBQ3BDLE9BQU9ULElBQUlHLE1BQU0sQ0FBQyxLQUFLSyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUF3QjtJQUMvRDtBQUNGO0FBRUEsb0NBQW9DO0FBQ3BDLGVBQWVGLGVBQWVSLEdBQUcsRUFBRUMsR0FBRztJQUNwQyxJQUFJO1FBQ0YsTUFBTSxFQUFFbUMsa0JBQWtCLEVBQUUsR0FBR3BDLElBQUlnQyxJQUFJO1FBQ3ZDLElBQUlJLHVCQUF1Qix3QkFBd0I7WUFDakQsT0FBT25DLElBQUlHLE1BQU0sQ0FBQyxLQUFLSyxJQUFJLENBQUM7Z0JBQzFCQyxPQUFPO1lBQ1Q7UUFDRjtRQUVBLDBCQUEwQjtRQUMxQi9CLE1BQU1pRCxNQUFNLEdBQUc7UUFFZixPQUFPM0IsSUFBSUcsTUFBTSxDQUFDLEtBQUtLLElBQUksQ0FBQztZQUMxQkcsU0FBUztRQUNYO0lBQ0YsRUFBRSxPQUFPRixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU9ULElBQUlHLE1BQU0sQ0FBQyxLQUFLSyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUF5QjtJQUNoRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZldGxpbmstYmFja2VuZC8uL3BhZ2VzL2FwaS9wb3N0cy9pbmRleC5qcz84ZTc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF1dGhNaWRkbGV3YXJlIH0gZnJvbSAnLi4vLi4vLi4vbGliL21pZGRsZXdhcmUvYXV0aCc7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcblxuLy8gSW4tbWVtb3J5IHN0b3JhZ2UgZm9yIHBvc3RzXG5sZXQgcG9zdHMgPSBbXG4gIHtcbiAgICBpZDogdXVpZHY0KCksXG4gICAgdXNlcl9pZDogJzU1MGU4NDAwLWUyOWItNDFkNC1hNzE2LTQ0NjY1NTQ0MDAwMCcsXG4gICAgdGl0bGU6ICdBZmV0IEhhesSxcmzEscSfxLEgw5ZuZXJpbGVyaScsXG4gICAgY29udGVudDogJ0RlcHJlbSDDp2FudGFzxLEgaGF6xLFybGFtYWsgacOnaW4gZ2VyZWtsaSBtYWx6ZW1lbGVyOiBTdSwga29uc2VydmUgeWl5ZWNla2xlciwgZWwgZmVuZXJpLCBwaWwsIGlsayB5YXJkxLFtIG1hbHplbWVsZXJpIHZlIMO2bmVtbGkgYmVsZ2VsZXJpbml6aW4ga29weWFsYXLEsS4nLFxuICAgIGltYWdlX3VybDogbnVsbCxcbiAgICBpbWFnZV91cmxzOiBudWxsLFxuICAgIGxpa2VzX2NvdW50OiAxNSxcbiAgICBjb21tZW50c19jb3VudDogOCxcbiAgICBzaGFyZXNfY291bnQ6IDMsXG4gICAgaXNfYWN0aXZlOiB0cnVlLFxuICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSAyICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksIC8vIDIgaG91cnMgYWdvXG4gICAgdXBkYXRlZF9hdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDIgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICB1c2Vyczoge1xuICAgICAgaWQ6ICc1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDAnLFxuICAgICAgZnVsbF9uYW1lOiAnQWhtZXQgWcSxbG1heicsXG4gICAgICBlbWFpbDogJ2FobWV0QGV4YW1wbGUuY29tJyxcbiAgICAgIGF2YXRhcl91cmw6IG51bGxcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBpZDogdXVpZHY0KCksXG4gICAgdXNlcl9pZDogJzU1MGU4NDAwLWUyOWItNDFkNC1hNzE2LTQ0NjY1NTQ0MDAwMScsXG4gICAgdGl0bGU6ICdEZXByZW0gQW7EsW5kYSBZYXDEsWxtYXPEsSBHZXJla2VubGVyJyxcbiAgICBjb250ZW50OiAnRGVwcmVtIHPEsXJhc8SxbmRhIHNha2luIGthbMSxbiwgbWFzYSBhbHTEsW5hIHNha2xhbsSxbiB2ZXlhIGhheWF0IMO8w6dnZW5pIG9sdcWfdHVydW4uIEFzYW5zw7ZyIGt1bGxhbm1hecSxbiwgbWVyZGl2ZW5sZXJpIHRlcmNpaCBlZGluLicsXG4gICAgaW1hZ2VfdXJsOiBudWxsLFxuICAgIGltYWdlX3VybHM6IG51bGwsXG4gICAgbGlrZXNfY291bnQ6IDIzLFxuICAgIGNvbW1lbnRzX2NvdW50OiAxMixcbiAgICBzaGFyZXNfY291bnQ6IDcsXG4gICAgaXNfYWN0aXZlOiB0cnVlLFxuICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSA0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksIC8vIDQgaG91cnMgYWdvXG4gICAgdXBkYXRlZF9hdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICB1c2Vyczoge1xuICAgICAgaWQ6ICc1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDEnLFxuICAgICAgZnVsbF9uYW1lOiAnRmF0bWEgRGVtaXInLFxuICAgICAgZW1haWw6ICdmYXRtYUBleGFtcGxlLmNvbScsXG4gICAgICBhdmF0YXJfdXJsOiBudWxsXG4gICAgfVxuICB9LFxuICB7XG4gICAgaWQ6IHV1aWR2NCgpLFxuICAgIHVzZXJfaWQ6ICc1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDInLFxuICAgIHRpdGxlOiAnWWFuZ8SxbiBHw7x2ZW5sacSfaScsXG4gICAgY29udGVudDogJ0V2ZGUgeWFuZ8SxbiBzw7ZuZMO8csO8Y8O8IGJ1bHVuZHVydW4sIGthw6fEscWfIHBsYW7EsSB5YXDEsW4gdmUgZMO8emVubGkgb2xhcmFrIGR1bWFuIGRlZGVrdMO2csO8IHBpbGxlcmluaSBrb250cm9sIGVkaW4uJyxcbiAgICBpbWFnZV91cmw6IG51bGwsXG4gICAgaW1hZ2VfdXJsczogbnVsbCxcbiAgICBsaWtlc19jb3VudDogOSxcbiAgICBjb21tZW50c19jb3VudDogNCxcbiAgICBzaGFyZXNfY291bnQ6IDIsXG4gICAgaXNfYWN0aXZlOiB0cnVlLFxuICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSA2ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksIC8vIDYgaG91cnMgYWdvXG4gICAgdXBkYXRlZF9hdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDYgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICB1c2Vyczoge1xuICAgICAgaWQ6ICc1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDInLFxuICAgICAgZnVsbF9uYW1lOiAnTWVobWV0IEtheWEnLFxuICAgICAgZW1haWw6ICdtZWhtZXRAZXhhbXBsZS5jb20nLFxuICAgICAgYXZhdGFyX3VybDogbnVsbFxuICAgIH1cbiAgfSxcbiAge1xuICAgIGlkOiB1dWlkdjQoKSxcbiAgICB1c2VyX2lkOiAnNTUwZTg0MDAtZTI5Yi00MWQ0LWE3MTYtNDQ2NjU1NDQwMDAzJyxcbiAgICB0aXRsZTogJ8SwbGV0acWfaW0gUGxhbsSxJyxcbiAgICBjb250ZW50OiAnQWlsZSDDvHllbGVyaXlsZSBhY2lsIGR1cnVtIGlsZXRpxZ9pbSBwbGFuxLEgb2x1xZ90dXJ1bi4gxZ5laGlyIGTEscWfxLFuZGFuIGJpciB5YWvEsW7EsW7EsXrEsW4gdGVsZWZvbiBudW1hcmFzxLFuxLEgaGVya2VzIGJpbHNpbi4nLFxuICAgIGltYWdlX3VybDogbnVsbCxcbiAgICBpbWFnZV91cmxzOiBudWxsLFxuICAgIGxpa2VzX2NvdW50OiAxOCxcbiAgICBjb21tZW50c19jb3VudDogNixcbiAgICBzaGFyZXNfY291bnQ6IDUsXG4gICAgaXNfYWN0aXZlOiB0cnVlLFxuICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSA4ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksIC8vIDggaG91cnMgYWdvXG4gICAgdXBkYXRlZF9hdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDggKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICB1c2Vyczoge1xuICAgICAgaWQ6ICc1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDMnLFxuICAgICAgZnVsbF9uYW1lOiAnQXnFn2Ugw5Z6a2FuJyxcbiAgICAgIGVtYWlsOiAnYXlzZUBleGFtcGxlLmNvbScsXG4gICAgICBhdmF0YXJfdXJsOiBudWxsXG4gICAgfVxuICB9LFxuICB7XG4gICAgaWQ6IHV1aWR2NCgpLFxuICAgIHVzZXJfaWQ6ICc1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDQnLFxuICAgIHRpdGxlOiAnU3UgQmFza8SxbsSxIMOWbmxlbWxlcmknLFxuICAgIGNvbnRlbnQ6ICdZYcSfbXVybHUgaGF2YWxhcmRhIGFsdCBrYXRsYXJkYSB5YcWfYXlhbmxhciBkaWtrYXRsaSBvbG1hbMSxLiBFbGVrdHJpayB0ZXNpc2F0xLFuxLEga29udHJvbCBldHRpcmluIHZlIHN1IGJhc2vEsW7EsSBpw6dpbiBhY2lsIHBsYW4geWFwxLFuLicsXG4gICAgaW1hZ2VfdXJsOiBudWxsLFxuICAgIGltYWdlX3VybHM6IG51bGwsXG4gICAgbGlrZXNfY291bnQ6IDExLFxuICAgIGNvbW1lbnRzX2NvdW50OiAzLFxuICAgIHNoYXJlc19jb3VudDogMSxcbiAgICBpc19hY3RpdmU6IHRydWUsXG4gICAgY3JlYXRlZF9hdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDEyICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksIC8vIDEyIGhvdXJzIGFnb1xuICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSAxMiAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLFxuICAgIHVzZXJzOiB7XG4gICAgICBpZDogJzU1MGU4NDAwLWUyOWItNDFkNC1hNzE2LTQ0NjY1NTQ0MDAwNCcsXG4gICAgICBmdWxsX25hbWU6ICdBbGkgw4dlbGlrJyxcbiAgICAgIGVtYWlsOiAnYWxpQGV4YW1wbGUuY29tJyxcbiAgICAgIGF2YXRhcl91cmw6IG51bGxcbiAgICB9XG4gIH1cbl07XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgLy8gQ09SUyBoZWFkZXJzXG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICcqJyk7XG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OUycpO1xuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ0NvbnRlbnQtVHlwZSwgQXV0aG9yaXphdGlvbicpO1xuXG4gIGlmIChyZXEubWV0aG9kID09PSAnT1BUSU9OUycpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmVuZCgpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBzd2l0Y2ggKHJlcS5tZXRob2QpIHtcbiAgICAgIGNhc2UgJ0dFVCc6XG4gICAgICAgIHJldHVybiBhd2FpdCBnZXRQb3N0cyhyZXEsIHJlcyk7XG4gICAgICBjYXNlICdQT1NUJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNyZWF0ZVBvc3QocmVxLCByZXMpO1xuICAgICAgY2FzZSAnREVMRVRFJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IGRlbGV0ZUFsbFBvc3RzKHJlcSwgcmVzKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignUG9zdHMgQVBJIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgXG4gICAgfSk7XG4gIH1cbn1cblxuLy8gR2V0IGFsbCBwb3N0cyB3aXRoIHVzZXIgaW5mb3JtYXRpb24gYW5kIGludGVyYWN0aW9uIGNvdW50c1xuYXN5bmMgZnVuY3Rpb24gZ2V0UG9zdHMocmVxLCByZXMpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHBhZ2UgPSAxLCBsaW1pdCA9IDEwLCB1c2VyX2lkIH0gPSByZXEucXVlcnk7XG4gICAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuXG4gICAgLy8gRmlsdGVyIGFjdGl2ZSBwb3N0c1xuICAgIGxldCBmaWx0ZXJlZFBvc3RzID0gcG9zdHMuZmlsdGVyKHBvc3QgPT4gcG9zdC5pc19hY3RpdmUpO1xuXG4gICAgLy8gRmlsdGVyIGJ5IHVzZXJfaWQgaWYgcHJvdmlkZWRcbiAgICBpZiAodXNlcl9pZCkge1xuICAgICAgZmlsdGVyZWRQb3N0cyA9IGZpbHRlcmVkUG9zdHMuZmlsdGVyKHBvc3QgPT4gcG9zdC51c2VyX2lkID09PSB1c2VyX2lkKTtcbiAgICB9XG5cbiAgICAvLyBTb3J0IGJ5IGNyZWF0ZWRfYXQgZGVzY2VuZGluZ1xuICAgIGZpbHRlcmVkUG9zdHMuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5jcmVhdGVkX2F0KSAtIG5ldyBEYXRlKGEuY3JlYXRlZF9hdCkpO1xuXG4gICAgLy8gQXBwbHkgcGFnaW5hdGlvblxuICAgIGNvbnN0IHBhZ2luYXRlZFBvc3RzID0gZmlsdGVyZWRQb3N0cy5zbGljZShvZmZzZXQsIG9mZnNldCArIHBhcnNlSW50KGxpbWl0KSk7XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgcG9zdHM6IHBhZ2luYXRlZFBvc3RzLFxuICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBwYWdlOiBwYXJzZUludChwYWdlKSxcbiAgICAgICAgbGltaXQ6IHBhcnNlSW50KGxpbWl0KSxcbiAgICAgICAgdG90YWw6IGZpbHRlcmVkUG9zdHMubGVuZ3RoLFxuICAgICAgICB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwoZmlsdGVyZWRQb3N0cy5sZW5ndGggLyBsaW1pdClcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdHZXQgcG9zdHMgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHBvc3RzJyB9KTtcbiAgfVxufVxuXG4vLyBDcmVhdGUgYSBuZXcgcG9zdFxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlUG9zdChyZXEsIHJlcykge1xuICB0cnkge1xuICAgIGNvbnN0IHsgdGl0bGUsIGNvbnRlbnQsIGltYWdlX3VybCwgaW1hZ2VfdXJscyB9ID0gcmVxLmJvZHk7XG5cbiAgICAvLyBWYWxpZGF0aW9uXG4gICAgaWYgKCF0aXRsZSB8fCAhY29udGVudCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXG4gICAgICAgIGVycm9yOiAnVGl0bGUgYW5kIGNvbnRlbnQgYXJlIHJlcXVpcmVkJyBcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aXRsZS5sZW5ndGggPiAyNTUpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICBlcnJvcjogJ1RpdGxlIG11c3QgYmUgbGVzcyB0aGFuIDI1NSBjaGFyYWN0ZXJzJyBcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjb250ZW50Lmxlbmd0aCA+IDUwMDApIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICBlcnJvcjogJ0NvbnRlbnQgbXVzdCBiZSBsZXNzIHRoYW4gNTAwMCBjaGFyYWN0ZXJzJyBcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBuZXcgcG9zdCBvYmplY3RcbiAgICBjb25zdCBuZXdQb3N0ID0ge1xuICAgICAgaWQ6IHV1aWR2NCgpLFxuICAgICAgdXNlcl9pZDogJzU1MGU4NDAwLWUyOWItNDFkNC1hNzE2LTQ0NjY1NTQ0MDAwMCcsIC8vIERlZmF1bHQgdXNlciBmb3IgZGVtb1xuICAgICAgdGl0bGU6IHRpdGxlLnRyaW0oKSxcbiAgICAgIGNvbnRlbnQ6IGNvbnRlbnQudHJpbSgpLFxuICAgICAgaW1hZ2VfdXJsOiBpbWFnZV91cmwgfHwgbnVsbCxcbiAgICAgIGltYWdlX3VybHM6IGltYWdlX3VybHMgfHwgbnVsbCxcbiAgICAgIGxpa2VzX2NvdW50OiAwLFxuICAgICAgY29tbWVudHNfY291bnQ6IDAsXG4gICAgICBzaGFyZXNfY291bnQ6IDAsXG4gICAgICBpc19hY3RpdmU6IHRydWUsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1c2Vyczoge1xuICAgICAgICBpZDogJzU1MGU4NDAwLWUyOWItNDFkNC1hNzE2LTQ0NjY1NTQ0MDAwMCcsXG4gICAgICAgIGZ1bGxfbmFtZTogJ1llbmkgS3VsbGFuxLFjxLEnLFxuICAgICAgICBlbWFpbDogJ3VzZXJAZXhhbXBsZS5jb20nLFxuICAgICAgICBhdmF0YXJfdXJsOiBudWxsXG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIEFkZCB0byBpbi1tZW1vcnkgc3RvcmFnZVxuICAgIHBvc3RzLnVuc2hpZnQobmV3UG9zdCk7IC8vIEFkZCB0byBiZWdpbm5pbmcgb2YgYXJyYXlcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7IFxuICAgICAgbWVzc2FnZTogJ1Bvc3QgY3JlYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgcG9zdDogbmV3UG9zdFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0NyZWF0ZSBwb3N0IGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgcG9zdCcgfSk7XG4gIH1cbn1cblxuLy8gRGVsZXRlIGFsbCBwb3N0cyAoYWRtaW4gZnVuY3Rpb24pXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBbGxQb3N0cyhyZXEsIHJlcykge1xuICB0cnkge1xuICAgIGNvbnN0IHsgY29uZmlybV9kZWxldGVfYWxsIH0gPSByZXEuYm9keTtcbiAgICBpZiAoY29uZmlybV9kZWxldGVfYWxsICE9PSAnWUVTX0RFTEVURV9BTExfUE9TVFMnKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBcbiAgICAgICAgZXJyb3I6ICdDb25maXJtYXRpb24gcmVxdWlyZWQuIFNldCBjb25maXJtX2RlbGV0ZV9hbGwgdG8gXCJZRVNfREVMRVRFX0FMTF9QT1NUU1wiJyBcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENsZWFyIGluLW1lbW9yeSBzdG9yYWdlXG4gICAgcG9zdHMubGVuZ3RoID0gMDtcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IFxuICAgICAgbWVzc2FnZTogJ0FsbCBwb3N0cyBoYXZlIGJlZW4gcGVybWFuZW50bHkgZGVsZXRlZCcgXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRGVsZXRlIGFsbCBwb3N0cyBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZGVsZXRlIHBvc3RzJyB9KTtcbiAgfVxufSJdLCJuYW1lcyI6WyJhdXRoTWlkZGxld2FyZSIsInY0IiwidXVpZHY0IiwicG9zdHMiLCJpZCIsInVzZXJfaWQiLCJ0aXRsZSIsImNvbnRlbnQiLCJpbWFnZV91cmwiLCJpbWFnZV91cmxzIiwibGlrZXNfY291bnQiLCJjb21tZW50c19jb3VudCIsInNoYXJlc19jb3VudCIsImlzX2FjdGl2ZSIsImNyZWF0ZWRfYXQiLCJEYXRlIiwibm93IiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0IiwidXNlcnMiLCJmdWxsX25hbWUiLCJlbWFpbCIsImF2YXRhcl91cmwiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2V0SGVhZGVyIiwibWV0aG9kIiwic3RhdHVzIiwiZW5kIiwiZ2V0UG9zdHMiLCJjcmVhdGVQb3N0IiwiZGVsZXRlQWxsUG9zdHMiLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsInBhZ2UiLCJsaW1pdCIsInF1ZXJ5Iiwib2Zmc2V0IiwiZmlsdGVyZWRQb3N0cyIsImZpbHRlciIsInBvc3QiLCJzb3J0IiwiYSIsImIiLCJwYWdpbmF0ZWRQb3N0cyIsInNsaWNlIiwicGFyc2VJbnQiLCJwYWdpbmF0aW9uIiwidG90YWwiLCJsZW5ndGgiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJib2R5IiwibmV3UG9zdCIsInRyaW0iLCJ1bnNoaWZ0IiwiY29uZmlybV9kZWxldGVfYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/posts/index.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cposts%5Cindex.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();